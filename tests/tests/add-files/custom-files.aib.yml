name: add_files
content:
  make_dirs:
    - path: /dir
    - path: /test-glob
    - path: /test-glob-preserve
    - path: /test-glob-preserve-log

  add_files:
    - path: /dir/file1.txt
      source_path: custom-files.aib.yml

    - path: /dir/file2.txt
      text: |
        This is the file content

    - path: /dir/file3.txt
      url: "https://gitlab.com/CentOS/automotive/src/automotive-image-builder/-/raw/main/README.md?ref_type=heads&inline=false"

    # Test basic glob pattern (flatten files)
    - path: /test-glob
      source_glob: "test-data/*.txt"
      preserve_path: false

    # Test glob pattern recursive (flatten files)
    - path: /test-glob-preserve-log
      source_glob: "test-data/**/*.log"
      preserve_path: false

    # Test large glob pattern with path preservation
    # Limit to 100 files to test max_files functionality
    - path: /test-glob-preserve
      source_glob: "test-data/**/*"
      preserve_path: true
      max_files: 100

qm:
  content:
    make_dirs:
      - path: /dir
    add_files:
      - path: /dir/file4.txt
        text: |
          This is the qm file content
